// Derivative of the X-Planes in RP-1 v1.7
// https://github.com/KSP-RO/RP-0

//This is the first crewed flight mission, available immediately. It is intended to represent the testing of early turbine aircraft.
//It should be accomplishable with start-node technology, using a fairly simple fixed-wing turbine aircraft.
CONTRACT_TYPE
{
	name = CrewedFlightLow
	group = Aeronautics

	title = First Flight (Low)

	description = Design, build and fly a crewed aircraft (not a rocket) to maintain @VesselGroup/ReachAlt/minAltitude meters altitude for 3 minutes then return home safely.
	genericDescription = Design, build and fly a crewed aircraft (not a rocket) to maintain a specific altitude then return home safely.

	synopsis = Fly to @VesselGroup/ReachAlt/minAltitude m.

	completedMessage = Congratulations on a successful flight!

	deadline = 365  // 1 (JNSQ) year
	cancellable = true
	declinable = true
	autoAccept = false
	minExpiry = 1
	maxExpiry = 1

	targetBody = HomeWorld()

	maxCompletions = 0
	maxSimultaneous = 1
	prestige = Trivial

	// reward block
	advanceFunds = Round(250.0 + @VesselGroup/ReachAlt/minAltitude * 10)
	rewardFunds = @advanceFunds
	failureFunds = @advanceFunds * 0.5
	rewardReputation = 0.5
	failureReputation = 0.5
	
	REQUIREMENT
	{
		name = All
		type = All

		REQUIREMENT
		{
			name = NotCompleteFirstCrewedSpaceFlight
			type = CompleteContract
			contractType = first_OrbitCrewed // Reach Orbit
			invertRequirement = true
		}
		REQUIREMENT
		{
			name = NotBrokeSoundBarrier
			type = CompleteContract
			contractType = BreakSoundBarrier // Sound Barrier Broken
			invertRequirement = true
		}
	}

	PARAMETER
	{
		name = VesselGroup
		type = VesselParameterGroup
		title = Maintain between @ReachAlt/minAltitude and @ReachAlt/maxAltitude m with a crewed aircraft.
		define = lowAirplane
		PARAMETER
		{
			name = NewVessel
			type = NewVessel
			title = Launch a New Vessel
			hideChildren = true
		}
		PARAMETER
		{
			name = HasCrew
			type = HasCrew
			minCrew = 1
			maxCrew = 99
			title = Have at least 1 crewmember on board
			hideChildren = true
		}
		PARAMETER
		{
			name = ReachAlt
			type = ReachState
			title = Hold between @minAltitude and @maxAltitude meters.
			minAltitude = Round(3000 + Random(0, 3000), 25)
			maxAltitude = @minAltitude + 1000
			
			title = Hold between @minAltitude and @maxAltitude meters.
			
			disableOnStateChange = true
			
			PARAMETER
			{
				name = Duration
				type = Duration
				duration = 3m
				preWaitText = Reach specified altitude.
				waitingText = Completing Flight
				completionText = Flight completed, you are cleared to land.
			}
		}
		PARAMETER
		{
			name = ReturnHome
			type = ReturnHome
			targetBody = HomeWorld()
			title = Return Home Safely
			hideChildren = true
			completeInSequence = true
		}
	}
}
